(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bddea5d2"],{"0ba7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"employee padding-x-24"},[a("k-search-table",{ref:"st",attrs:{data:e.dataList,url:"/api/project/user/page","search-data":e.search},on:{reset:e.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"登录名",prop:"name"}},[a("el-input",{model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"user_name"}},[a("el-input",{model:{value:e.search.user_name,callback:function(t){e.$set(e.search,"user_name",t)},expression:"search.user_name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.search.email,callback:function(t){e.$set(e.search,"email",t)},expression:"search.email"}})],1)],1),a("template",{slot:"buttons"}),a("template",{slot:"columns"},[a("el-table-column",{attrs:{label:"id",prop:"id"}}),a("el-table-column",{attrs:{label:"登录名",prop:"name"}}),a("el-table-column",{attrs:{label:"姓名",prop:"user_name"}}),a("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",{staticClass:"text-success"},[e._v("正常")]):0==t.row.state?a("span",{staticClass:"text-error"},[e._v("冻结")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"管理权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.project_role?a("span",[a("el-tag",{attrs:{type:"warning"}},[e._v(" 有 ")])],1):2==t.row.project_role?a("span",[a("el-tag",{attrs:{type:"info"}},[e._v("无")])],1):a("span")]}}])}),e.project_home.is_manager?a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.role_name?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.role_name))]):a("span",{attrs:{type:"info"}})]}}],null,!1,449444796)}):e._e(),e.project_home.is_manager?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.project_home.is_manager?a("k-btn-tip",{attrs:{tip:"确定要把【"+t.row.name+"】用户移出项目吗?"},on:{click:function(a){return e.onRemove(t.row.id)}}},[a("el-button",{attrs:{size:"mini",type:"danger",disabled:e.user.id==t.row.id}},[e._v("移出 ")])],1):e._e()]}}],null,!1,851456564)}):e._e()],1)],2)],1)},r=[],n=(a("a15b"),a("ac1f"),a("841c"),a("5530")),o=a("2f62"),i=a("c1df"),l=a.n(i),c=a("5c96"),u={data:function(){return{formData:{name:""},id:this.$route.params.id,cp:"南京树安信息技术有限公司",no_role:!1,search:{id:this.$route.params.id,rel_type:1},dataList:[],roles:[],projects:[],sys_roles:[{k:"",v:"全部"},{k:1,v:"超级管理员"},{k:2,v:"管理员"},{k:3,v:"管理员"},{k:4,v:"普通用户"}],sources:[{k:"",v:"全部"},{k:"focus",v:"焦点"},{k:"system_add",v:"后台添加"}],role_states:[{k:"0",v:"全部"},{k:"1",v:"已分配"},{k:"2",v:"未分配"}]}},computed:Object(n["a"])({},Object(o["c"])(["user","project_home"])),props:{},watch:{},methods:{onRemove:function(e){var t=this;this.$api.project.kick(this.id,e).then((function(){t.onSuccess("移除成功"),t.refresh()}))},init:function(){},showRoleNames:function(e){return e&&e.length>0&&""!=e[0]?e.join(","):"无"},resetSearch:function(){console.log("========resetSearch========="),this.search={}},showTime:function(e){return l()(new Date(e)).format("YYYY-MM-DD HH:mm:ss")},onReset:function(e){var t=this;this.$api.post("/api/user/reset",{id:e.id}).then((function(e){t.onSuccess(e),t.refresh("操作成功")}),(function(e){c["Message"].error({title:"请求",message:e&&e.data?e.data:e,type:"error",duration:2e3})}))},refresh:function(){this.$refs.st.search()},onNew:function(){this.$refs.dialogEdit.show()},onShowAuth:function(e){this.$refs.dialogAuth.show(e)},onEdit:function(e){this.$refs.dialogEdit.show(e)},onState:function(e,t){var a=this;this.$api.user.state(e.id,t).then((function(){a.onSuccess("操作成功"),a.refresh()}),(function(e){c["Message"].error({title:"请求",message:e&&e.data?e.data:e,type:"error",duration:2e3})}))},onDel:function(e){var t=this;this.$api.user.delete(e.id).then((function(){t.onSuccess("操作成功"),t.refresh()}),(function(e){c["Message"].error({title:"请求",message:e&&e.data?e.data:e,type:"error",duration:2e3})}))}},components:{},mounted:function(){}},p=u,f=(a("59ab"),a("2877")),m=Object(f["a"])(p,s,r,!1,null,null,null);t["default"]=m.exports},"59ab":function(e,t,a){"use strict";var s=a("e721"),r=a.n(s);r.a},a15b:function(e,t,a){"use strict";var s=a("23e7"),r=a("44ad"),n=a("fc6a"),o=a("a640"),i=[].join,l=r!=Object,c=o("join",",");s({target:"Array",proto:!0,forced:l||!c},{join:function(e){return i.call(n(this),void 0===e?",":e)}})},e721:function(e,t,a){}}]);