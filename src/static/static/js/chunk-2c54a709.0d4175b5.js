(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c54a709"],{1675:function(t,e,a){},6545:function(t,e,a){"use strict";var s=a("1675"),o=a.n(s);o.a},"7eba":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"database padding-x-24"},[a("k-search-table",{ref:"st",attrs:{url:"/api/project/db/page","search-data":t.search},on:{reset:t.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),a("el-form-item",{attrs:{label:"数据源类型:"}},[a("el-select",{attrs:{clearable:!0},model:{value:t.search.db_type,callback:function(e){t.$set(t.search,"db_type",e)},expression:"search.db_type"}},t._l(t.db_types,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("template",{slot:"buttons"}),a("template",{slot:"columns"},[a("el-table-column",{attrs:{label:"数据源",prop:"name"}}),a("el-table-column",{attrs:{label:"类型",prop:"db_type"}}),a("el-table-column",{attrs:{label:"启用"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("span",{staticClass:"text-info"},[t._v(" 是 ")]):a("span",{staticClass:"text-warn"},[t._v(" 否 ")])]}}])}),a("el-table-column",{attrs:{label:"连接状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("div",[3==e.row.con_state?a("el-tooltip",{attrs:{content:e.row.err_msg,placement:"bottom",effect:"light"}},[a("span",{staticClass:"text-warn"},[t._v("连接失败")])]):2==e.row.con_state?a("span",{staticClass:"text-success"},[t._v("已连接")]):1==e.row.con_state?a("span",{staticClass:"text-info"},[t._v("连接中")]):a("span",{staticClass:"text-info"},[t._v("未连接")])],1):t._e()]}}])}),a("el-table-column",{attrs:{label:"读写"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.oper_type?a("span",{staticClass:"text-success"},[t._v("只读")]):a("span",{staticClass:"text-error"},[t._v("读写")])]}}])}),a("el-table-column",{attrs:{label:"创建时间","min-width":"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.created_at)))]}}])}),t.project_home.is_manager?a("el-table-column",{attrs:{label:"同步时间","min-width":"160px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.sync_time)))]}}],null,!1,15675272)}):t._e(),t.project_home.is_manager?a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.project_home.is_manager?a("k-btn-tip",{attrs:{tip:"确定要同步数据源【"+e.row.name+"】吗?"},on:{click:function(a){return t.onSyncDB(e.row)}}},[a("el-button",{attrs:{size:"mini"}},[t._v("同步 ")])],1):t._e()]}}],null,!1,1116269e3)}):t._e()],1)],2)],1)},o=[],n=(a("99af"),a("a15b"),a("ac1f"),a("841c"),a("5530")),l=a("2909"),r=a("2f62"),c={data:function(){return{ids:"",id:this.$route.params.id,search:{project:this.$route.params.id,rel_type:1},con_states:[{k:"0",v:"全部"},{k:"1",v:"连接中"},{k:"2",v:"连接成功"},{k:"3",v:"连接失败"}],rel_types:[{k:"",v:"全部"},{k:"1",v:"已关联"},{k:"2",v:"未关联"}],db_types:[{label:"全部",value:""}].concat(Object(l["a"])([{label:"Oracle",value:"oracle",type:"db",port:1521},{label:"MySql",value:"mysql",type:"db",port:3306},{label:"MsSql",value:"mssql",type:"db",port:1433},{label:"MongoDB",value:"mongodb",type:"db",port:27017},{label:"Mycat",value:"mycat",type:"ds",port:3306},{label:"Redis",value:"redis",type:"db",port:6379}]))}},computed:Object(n["a"])({},Object(r["c"])(["user","project_home"])),props:{},watch:{},methods:{onSelect:function(t){console.log("onSelect val:",t);for(var e=[],a=0;a<t.length;a++)e.push(t[a].id);console.log("ids:",e.join(",")),this.ids=e.join(",")},showTagType:function(t){return this.$api.work.showTagType(t)},goWorkBackUp:function(t){this.$refs.backupDialog.show(t.id,!0)},goWorkDetail:function(t){this.$refs.detailDialog.show(t.id,!0)},showStatus:function(t){return this.$api.work.showStatus(t)},refresh:function(){this.$refs.st.search()},resetSearch:function(){console.log("========resetSearch========="),this.search={rel_type:1},this.search.project=this.id},reload:function(){this.$refs.st.reload()},openApplyInfo:function(t){this.$refs.applyInfoDialog.show(t)},openWork:function(t){this.$refs.workDialog.show(t)},init:function(){},onSyncDB:function(t){var e=this;this.$api.project.syncDB(this.id,t.id).then((function(t){e.onSuccess(t),e.refresh()}))}},components:{},mounted:function(){}},i=c,u=(a("6545"),a("2877")),p=Object(u["a"])(i,s,o,!1,null,null,null);e["default"]=p.exports},a15b:function(t,e,a){"use strict";var s=a("23e7"),o=a("44ad"),n=a("fc6a"),l=a("a640"),r=[].join,c=o!=Object,i=l("join",",");s({target:"Array",proto:!0,forced:c||!i},{join:function(t){return r.call(n(this),void 0===t?",":t)}})}}]);