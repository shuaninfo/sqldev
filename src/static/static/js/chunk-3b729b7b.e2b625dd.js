(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b729b7b"],{1053:function(e,t,a){},"10e5":function(e,t,a){"use strict";var s=a("1053"),r=a.n(s);r.a},"14df":function(e,t,a){"use strict";var s=a("694c"),r=a.n(s);r.a},"1b45b":function(e,t,a){},"694c":function(e,t,a){},"6cb3":function(e,t,a){"use strict";var s=a("1b45b"),r=a.n(s);r.a},7162:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("k-search-table",{ref:"st",attrs:{url:"/api/sys/report/stat","search-data":e.searchAdvance},on:{reset:e.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"时间范围:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"picker-options":e.$constant.pickOptions},model:{value:e.search.dateRange,callback:function(t){e.$set(e.search,"dateRange",t)},expression:"search.dateRange"}})],1),a("el-form-item",{attrs:{label:"数据源:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.db_id,callback:function(t){e.$set(e.search,"db_id",t)},expression:"search.db_id"}},e._l(e.instances,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"执行状态:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.state,callback:function(t){e.$set(e.search,"state",t)},expression:"search.state"}},e._l(e.states,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{label:"操作类型:"}},[a("el-select",{attrs:{multiple:"",clearable:!0},model:{value:e.search.task_type,callback:function(t){e.$set(e.search,"task_type",t)},expression:"search.task_type"}},e._l(e.types,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{label:"排序规则:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.order_by,callback:function(t){e.$set(e.search,"order_by",t)},expression:"search.order_by"}},e._l(e.orderbys,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1)],1),a("template",{slot:"buttons"},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.onExport}},[e._v("导出")])],1),a("template",{slot:"columns"},[a("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"hits",label:"执行次数"}}),a("el-table-column",{attrs:{label:"数据行数",prop:"data_count"}})],1)],2)],1)},r=[],n=(a("ac1f"),a("841c"),a("5530")),l=a("2f62"),o=a("c1df"),c=a.n(o),i={data:function(){return{instances:[],states:[{k:0,v:"全部"},{k:1,v:"成功"},{k:2,v:"失败"}],orderbys:[{k:0,v:"按执行次数排序"},{k:1,v:"按数据总量顺序"}],types:[{k:1,v:"异步"},{k:2,v:"导出文件"},{k:3,v:"导出SQL"},{k:11,v:"查询"},{k:12,v:"更新"},{k:13,v:"插入"},{k:14,v:"删除"},{k:99,v:"其他"}],search:{ip:"",start:"",end:"",type:this.defaultType,owner:"",order_by:0,db_id:null,dateRange:[c()().startOf("d").toDate(),c()().endOf("d").toDate()]}}},computed:Object(n["a"])({searchAdvance:function(){var e=Object(n["a"])({},this.search);return e.dateRange&&(e.start=c()(e.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),e.end=c()(e.dateRange[1]).format("YYYY-MM-DD HH:mm:ss"),delete e.dateRange),e}},Object(l["c"])(["user"])),props:{defaultType:{}},watch:{},methods:{onDownload:function(e){var t=window.localStorage.getItem("token");this.$api.download("/api/download/export/excel",{id:e,access_token:t})},onExport:function(){var e=this,t=Object(n["a"])({},this.search);t.dateRange&&(t.start=c()(t.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),t.end=c()(t.dateRange[1]).format("YYYY-MM-DD HH:mm:ss")),this.$api.post("/api/sys/report/stat/export",t).then((function(t){console.log("ret:",t),e.onDownload(t)}))},quickSearch:function(e,t){this.search[e]=t,this.$refs.st.search()},resetSearch:function(){console.log("========resetSearch========="),this.search={start:"",end:"",task_type:0,type:this.defaultType,db_id:null,dateRange:[c()().startOf("d").toDate(),c()().endOf("d").toDate()]}},refresh:function(){this.$refs.st.search()},toType:function(e,t){return 1==e?"异步":2==e?"导出":11==e?"查询":12==e?"更新":13==e?"插入":14==e?"删除":"其他"},toState:function(e){return 1==e?"成功":2==e?"失败":0==e?"执行中":"不明"}},components:{},mounted:function(){var e=this;this.$api.post("/api/instance/all").then((function(t){e.instances=t}))}},d=i,u=(a("14df"),a("2877")),p=Object(u["a"])(d,s,r,!1,null,null,null);t["a"]=p.exports},"90c4":function(e,t,a){},"93ce":function(e,t,a){"use strict";var s=a("90c4"),r=a.n(s);r.a},e55d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"apps padding-x-24"},[a("el-tabs",{staticClass:"sysTabs",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户统计",name:"first"}},[a("report-user",{attrs:{form:e.form,"default-type":"export_user_stat"}})],1),a("el-tab-pane",{attrs:{label:"数据源统计",name:"second"}},[a("report-db",{attrs:{form:e.form,"default-type":"report_db_stat"}})],1),a("el-tab-pane",{attrs:{label:"用户/库统计",name:"three"}},[a("report-stat",{attrs:{form:e.form,"default-type":"export_report_stat"}})],1)],1)],1)},r=[],n=(a("5743"),a("c1df")),l=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("k-search-table",{ref:"st",attrs:{url:"/api/sys/report/stat","search-data":e.searchAdvance},on:{reset:e.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"时间范围:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"picker-options":e.$constant.pickOptions},model:{value:e.search.dateRange,callback:function(t){e.$set(e.search,"dateRange",t)},expression:"search.dateRange"}})],1),a("el-form-item",{attrs:{label:"数据源:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.db_id,callback:function(t){e.$set(e.search,"db_id",t)},expression:"search.db_id"}},e._l(e.instances,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"执行状态:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.state,callback:function(t){e.$set(e.search,"state",t)},expression:"search.state"}},e._l(e.states,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{label:"操作类型:"}},[a("el-select",{attrs:{multiple:"",clearable:!0},model:{value:e.search.task_type,callback:function(t){e.$set(e.search,"task_type",t)},expression:"search.task_type"}},e._l(e.types,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{prop:"opt_user",label:"操作人"}},[a("el-input",{attrs:{placeholder:"请选择操作人",clearable:""},model:{value:e.search.user_name,callback:function(t){e.$set(e.search,"user_name",t)},expression:"search.user_name"}})],1),a("el-form-item",{attrs:{label:"排序规则:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.order_by,callback:function(t){e.$set(e.search,"order_by",t)},expression:"search.order_by"}},e._l(e.orderbys,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1)],1),a("template",{slot:"buttons"},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.onExport}},[e._v("导出")])],1),a("template",{slot:"columns"},[a("el-table-column",{attrs:{prop:"user_name",label:"操作人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"db_name",label:"数据库"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.db_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"db_type",label:"库类型"}}),a("el-table-column",{attrs:{prop:"hits",label:"执行次数"}}),a("el-table-column",{attrs:{label:"数据行数",prop:"data_count"}})],1)],2)],1)},c=[],i=(a("ac1f"),a("841c"),a("5530")),d=a("2f62"),u={data:function(){return{instances:[],states:[{k:0,v:"全部"},{k:1,v:"成功"},{k:2,v:"失败"}],orderbys:[{k:0,v:"按执行次数排序"},{k:1,v:"按数据总量顺序"}],types:[{k:1,v:"异步"},{k:2,v:"导出文件"},{k:3,v:"导出SQL"},{k:11,v:"查询"},{k:12,v:"更新"},{k:13,v:"插入"},{k:14,v:"删除"},{k:99,v:"其他"}],search:{ip:"",start:"",end:"",type:this.defaultType,owner:"",order_by:0,db_id:null,dateRange:[l()().startOf("d").toDate(),l()().endOf("d").toDate()]}}},computed:Object(i["a"])({searchAdvance:function(){var e=Object(i["a"])({},this.search);return e.dateRange&&(e.start=l()(e.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),e.end=l()(e.dateRange[1]).format("YYYY-MM-DD HH:mm:ss"),delete e.dateRange),e}},Object(d["c"])(["user"])),props:{defaultType:{}},watch:{},methods:{onDownload:function(e){var t=window.localStorage.getItem("token");this.$api.download("/api/download/export/excel",{id:e,access_token:t})},onExport:function(){var e=this,t=Object(i["a"])({},this.search);t.dateRange&&(t.start=l()(t.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),t.end=l()(t.dateRange[1]).format("YYYY-MM-DD HH:mm:ss")),this.$api.post("/api/sys/report/stat/export",t).then((function(t){console.log("ret:",t),e.onDownload(t)}))},quickSearch:function(e,t){this.search[e]=t,this.$refs.st.search()},resetSearch:function(){console.log("========resetSearch========="),this.search={start:"",end:"",type:this.defaultType,db_id:null,dateRange:[l()().startOf("d").toDate(),l()().endOf("d").toDate()]}},refresh:function(){this.$refs.st.search()},toType:function(e,t){return 1==e?"异步":2==e?"导出":11==e?"查询":12==e?"更新":13==e?"插入":14==e?"删除":"其他"},toState:function(e){return 1==e?"成功":2==e?"失败":0==e?"执行中":"不明"}},components:{},mounted:function(){var e=this;this.$api.post("/api/instance/all").then((function(t){e.instances=t}))}},p=u,f=(a("10e5"),a("2877")),h=Object(f["a"])(p,o,c,!1,null,null,null),b=h.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("k-search-table",{ref:"st",attrs:{url:"/api/sys/report/stat","search-data":e.searchAdvance},on:{reset:e.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"时间范围:"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"picker-options":e.$constant.pickOptions},model:{value:e.search.dateRange,callback:function(t){e.$set(e.search,"dateRange",t)},expression:"search.dateRange"}})],1),a("el-form-item",{attrs:{label:"数据源:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.db_id,callback:function(t){e.$set(e.search,"db_id",t)},expression:"search.db_id"}},e._l(e.instances,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"执行状态:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.state,callback:function(t){e.$set(e.search,"state",t)},expression:"search.state"}},e._l(e.states,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{label:"操作类型:"}},[a("el-select",{attrs:{multiple:"",clearable:!0},model:{value:e.search.task_type,callback:function(t){e.$set(e.search,"task_type",t)},expression:"search.task_type"}},e._l(e.types,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1),a("el-form-item",{attrs:{prop:"opt_user",label:"操作人"}},[a("el-input",{attrs:{placeholder:"请填写操作人",clearable:""},model:{value:e.search.user_name,callback:function(t){e.$set(e.search,"user_name",t)},expression:"search.user_name"}})],1),a("el-form-item",{attrs:{label:"排序规则:"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.search.order_by,callback:function(t){e.$set(e.search,"order_by",t)},expression:"search.order_by"}},e._l(e.orderbys,(function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})})),1)],1)],1),a("template",{slot:"buttons"},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.onExport}},[e._v("导出")])],1),a("template",{slot:"columns"},[a("el-table-column",{attrs:{prop:"db_name",label:"数据库"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.db_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"db_type",label:"库类型"}}),a("el-table-column",{attrs:{prop:"hits",label:"执行次数"}}),a("el-table-column",{attrs:{label:"数据行数",prop:"data_count"}})],1)],2)],1)},k=[],v={data:function(){return{instances:[],states:[{k:0,v:"全部"},{k:1,v:"成功"},{k:2,v:"失败"}],orderbys:[{k:0,v:"按执行次数排序"},{k:1,v:"按数据总量顺序"}],types:[{k:1,v:"异步"},{k:2,v:"导出文件"},{k:3,v:"导出SQL"},{k:11,v:"查询"},{k:12,v:"更新"},{k:13,v:"插入"},{k:14,v:"删除"},{k:99,v:"其他"}],search:{ip:"",start:"",end:"",type:this.defaultType,owner:"",order_by:0,db_id:null,dateRange:[l()().startOf("d").toDate(),l()().endOf("d").toDate()]}}},computed:Object(i["a"])({searchAdvance:function(){var e=Object(i["a"])({},this.search);return e.dateRange&&(e.start=l()(e.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),e.end=l()(e.dateRange[1]).format("YYYY-MM-DD HH:mm:ss"),delete e.dateRange),e}},Object(d["c"])(["user"])),props:{defaultType:{}},watch:{},methods:{onDownload:function(e){var t=window.localStorage.getItem("token");this.$api.download("/api/download/export/excel",{id:e,access_token:t})},onExport:function(){var e=this,t=Object(i["a"])({},this.search);t.dateRange&&(t.start=l()(t.dateRange[0]).format("YYYY-MM-DD HH:mm:ss"),t.end=l()(t.dateRange[1]).format("YYYY-MM-DD HH:mm:ss")),this.$api.post("/api/sys/report/stat/export",t).then((function(t){console.log("ret:",t),e.onDownload(t)}))},quickSearch:function(e,t){this.search[e]=t,this.$refs.st.search()},resetSearch:function(){console.log("========resetSearch========="),this.search={start:"",end:"",type:this.defaultType,db_id:null,dateRange:[l()().startOf("d").toDate(),l()().endOf("d").toDate()]}},refresh:function(){this.$refs.st.search()},toType:function(e,t){return 1==e?"异步":2==e?"导出":11==e?"查询":12==e?"更新":13==e?"插入":14==e?"删除":"其他"},toState:function(e){return 1==e?"成功":2==e?"失败":0==e?"执行中":"不明"}},components:{},mounted:function(){var e=this;this.$api.post("/api/instance/all").then((function(t){e.instances=t}))}},_=v,y=(a("93ce"),Object(f["a"])(_,m,k,!1,null,null,null)),g=y.exports,Y=a("7162"),D={data:function(){return{instances:[],setting:{},inter:null,run_str:"",size:"small",activeName:"first",form:{sql_mode:!0,license:""},handleClick:function(e,t){console.log("handleClick:",e,t)}}},methods:{},components:{ReportStat:b,ReportDb:g,ReportUser:Y["a"]},mounted:function(){this.$nextTick((function(){}))}},x=D,$=(a("6cb3"),Object(f["a"])(x,s,r,!1,null,"18dfcb8e",null));t["default"]=$.exports}}]);