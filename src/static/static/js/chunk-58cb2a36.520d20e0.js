(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58cb2a36"],{"7efd":function(t,e,a){},"8df9":function(t,e,a){"use strict";var o=a("7efd"),n=a.n(o);n.a},"8f70":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"database"},[a("k-search-table",{ref:"st",attrs:{url:"/api/my/work/list","search-data":t.search},on:{reset:t.resetSearch}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{label:"名称",prop:"name",size:"mini"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini"},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1)],1),a("template",{slot:"columns"},[a("el-table-column",{attrs:{label:"编号",prop:"id",width:"120"}}),a("el-table-column",{attrs:{label:"工单名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.goWorkDetail(e.row)}}},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("el-tag",[t._v(" DML ")]):2==e.row.type?a("el-tag",{attrs:{type:"danger"}},[t._v("DDL")]):a("span",{staticClass:"text-warning"},[t._v(" 未知 ")])]}}])}),a("el-table-column",{attrs:{label:"项目",prop:"project_name"}}),a("el-table-column",{attrs:{label:"工单状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.showTagType(e.row.status)}},[t._v(t._s(t.showStatus(e.row.status)))])]}}])}),a("el-table-column",{attrs:{label:"发起时间",prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateTime")(e.row.created_at)))]}}])}),a("el-table-column",{attrs:{label:"目标数据源",prop:"db_name"}}),a("el-table-column",{attrs:{label:"目标数据库",prop:"owner"}}),a("el-table-column",{attrs:{label:"是否备份"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.back_up?a("span",[t._v("是")]):a("span",[t._v("否")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.goWorkDetail(e.row)}}},[t._v("详情 ")]),1==e.row.back_up&&6==e.row.status?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return t.goWorkBackUp(e.row)}}},[t._v("备份 ")]):t._e()]}}])})],1)],2),a("dialog-detail",{ref:"detailDialog",on:{refresh:t.refresh}}),a("dialog-backup",{ref:"backupDialog"})],1)},n=[],s=(a("ac1f"),a("841c"),a("c58e")),r=a("d170"),l={data:function(){return{formData:{name:""},id:this.$route.params.id,search2:{db_type:null,project:this.$route.params.id},search:{db_type:null,project:this.$route.params.id},con_states:[{k:"0",v:"全部"},{k:"1",v:"连接中"},{k:"2",v:"连接成功"},{k:"3",v:"连接失败"}],status_types:[{k:"0",v:"全部"},{k:"1",v:"待审核"},{k:"2",v:"已通过"},{k:"3",v:"未通过"}]}},computed:{},props:{},watch:{},methods:{showTagType:function(t){return this.$api.work.showTagType(t)},goWorkBackUp:function(t){this.$refs.backupDialog.show(t.id,!0)},goWorkDetail:function(t){this.$refs.detailDialog.show(t.id,!0)},showStatus:function(t){return this.$api.work.showStatus(t)},refresh:function(){this.$refs.st.search()},resetSearch:function(){console.log("========resetSearch========="),this.search={}},reload:function(){this.$refs.st.reload()},openApplyInfo:function(t){this.$refs.applyInfoDialog.show(t)},openWork:function(t){this.$refs.workDialog.show(t)},init:function(){var t=this;this.$api.project.info(this.id,1).then((function(e){t.formData=e}))},onDel:function(t){var e=this;this.$api.db.delete(t.id).then((function(){e.onSuccess("删除成功"),e.reload()}))}},components:{DialogDetail:s["a"],DialogBackup:r["a"]},mounted:function(){}},i=l,c=(a("8df9"),a("2877")),u=Object(c["a"])(i,o,n,!1,null,null,null);e["default"]=u.exports}}]);