(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfc2e074"],{"0710":function(e,o,s){"use strict";s.r(o);var r=function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("el-container",[s("el-form",{ref:"form",staticClass:"userInfo",staticStyle:{width:"600px"},attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[s("el-form-item",{attrs:{label:"用户名"}},[e._v(" "+e._s(e.form.name)+" ")]),s("el-form-item",{attrs:{label:"旧密码",prop:"old_password"}},[s("el-input",{attrs:{"show-password":!0,type:e.pw_show?"text":"password"},model:{value:e.form.old_password,callback:function(o){e.$set(e.form,"old_password",o)},expression:"form.old_password"}})],1),s("el-form-item",{attrs:{label:"新密码",prop:"new_password"}},[s("el-tooltip",{attrs:{placement:"top",content:"密码长度8到32位,包含字母和数字,不支持简单口令"}},[s("el-input",{attrs:{"show-password":!0,type:e.pw_show1?"text":"password"},model:{value:e.form.new_password,callback:function(o){e.$set(e.form,"new_password",o)},expression:"form.new_password"}})],1)],1),s("el-form-item",{attrs:{label:"重复新密码",prop:"new_password2"}},[s("el-input",{attrs:{"show-password":!0,type:e.pw_show2?"text":"password"},model:{value:e.form.new_password2,callback:function(o){e.$set(e.form,"new_password2",o)},expression:"form.new_password2"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)},t=[],a=s("5530"),n=s("2f62"),l=(s("365c"),s("2ef0")),i={data:function(){var e=this;return{pw_show:!1,pw_show1:!1,pw_show2:!1,form:this.reset(),rules:{old_password:[{required:!0,message:"请输入原密码",trigger:"blur"}],new_password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,max:32,message:"长度在 8 到 32 个字符"},{validator:function(o,s,r){console.log("value:",s),s&&s.length>8?e.$api.post("/api/pwdScore",{pwd:s}).then((function(e){e.score<2?r(new Error("密码过于简单!")):r()}),(function(e){r(new Error(e&&e.data?e.data:e))})):r()},trigger:"blur"}],new_password2:[{required:!0,message:"请重复输入新密码",trigger:"blur"},{min:8,max:32,message:"长度在 8 到 32 个字符"},{validator:function(o,s,r){console.log("+======+"),console.dir(e.form),e.form.new_password!=s?r(new Error("新密码两次输入不一致!")):r()},trigger:"blur"}]}}},computed:Object(a["a"])({},Object(n["c"])(["user"])),components:{},methods:{showFail:function(e){this.$message({showClose:!0,duration:2e3,type:"warning",message:e||"调用失败!"})},showOk:function(e){this.$message({showClose:!0,duration:2e3,type:"success",message:e})},reset:function(){return{name:"",old_password:"",new_password:"",new_password2:""}},onSubmit:function(){var e=this;console.log("submit!"),this.$refs.form.validate((function(o){if(console.log("valid:"+o),!o)return!1;e.$api.post("/api/my/pwd/change",e.form).then((function(o){e.form={},window.localStorage.removeItem("forcePwd"),e.onSuccess("更新成功!")}),(function(o){e.onError(o&&o.data?o.data:o)}))}))}},mounted:function(){this.form=l["cloneDeep"](this.user)}},w=i,p=(s("d26c"),s("0c7c")),c=Object(p["a"])(w,r,t,!1,null,"293524fa",null);o["default"]=c.exports},d26c:function(e,o,s){"use strict";var r=s("fd1a"),t=s.n(r);t.a},fd1a:function(e,o,s){}}]);