(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-644c47d6"],{"29f6":function(t,e,s){"use strict";s.r(e);var n,i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-row",{attrs:{gutter:8}},[s("el-col",{attrs:{span:24}},[s("div",{staticClass:"sys-setting"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("功能设置")])]),s("el-form",{ref:"form",staticClass:"el-row",attrs:{model:t.form,"label-width":"160px",size:"mini"}},[s("el-form-item",{staticClass:"el-col-12",attrs:{label:"开启页面水印"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.water_mark,callback:function(e){t.$set(t.form,"water_mark",e)},expression:"form.water_mark"}})],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"使用异步查询功能"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.asyn_query,callback:function(e){t.$set(t.form,"asyn_query",e)},expression:"form.asyn_query"}})],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"使用导出Sql功能"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.asyn_sql,callback:function(e){t.$set(t.form,"asyn_sql",e)},expression:"form.asyn_sql"}})],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"使用异步导出功能"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.asyn_export,callback:function(e){t.$set(t.form,"asyn_export",e)},expression:"form.asyn_export"}})],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"使用加密方式传输Sql"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.encrypt_sql,callback:function(e){t.$set(t.form,"encrypt_sql",e)},expression:"form.encrypt_sql"}})],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"上报解析失败SQL"}},[s("el-tooltip",{attrs:{placement:"top",content:"开启后，解析失败的SQL会发给厂商定位错误"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.report_sql,callback:function(e){t.$set(t.form,"report_sql",e)},expression:"form.report_sql"}})],1)],1),s("el-form-item",{staticClass:"el-col-12",attrs:{label:"强制开启二次校验"}},[s("el-tooltip",{attrs:{placement:"top",content:"开启后,所有账户登录都使用双因子校验"}},[s("el-switch",{attrs:{size:"mini"},model:{value:t.form.force_tfa,callback:function(e){t.$set(t.form,"force_tfa",e)},expression:"form.force_tfa"}})],1)],1),s("el-form-item",{staticClass:"el-col-24"},[s("el-button",{staticClass:"el-button--default",attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存 ")])],1)],1)],1)],1)])],1)},o=[],a=(s("b0c0"),s("ade3")),r=s("c1df"),l=s.n(r),c={data:function(){return{setting:{},inter:null,run_str:"",size:"small",activeName:"first",form:{sql_mode:!0,license:""},form2:{}}},methods:(n={checkLicense:function(){},showTime:function(t){return console.log("expire:",t),l()(new Date(t)).format("YYYY-MM-DD HH:mm:ss")},diffTime:function(){var t="NaN";if(this.form.start_time){var e=l()().diff(l()(1e3*this.form.start_time));console.log("ms:",e);var s=l.a.duration(e),n=Math.floor(s.asHours()),i=l.a.utc(e).format("mm"),o=l.a.utc(e).format("ss");t="",s>0&&(t=s+"天"),n>0&&(t+=n+"小时"),t+=i+"分钟",t+=o+"秒",console.log("d:",s,"  h:",n," m:",i," s:",o)}this.run_str=t}},Object(a["a"])(n,"checkLicense",(function(){var t=this;this.$api.setting.updateLicense(this.form).then((function(){t.onSuccess("更新成功"),t.getSetting()}),(function(e){var s="参数错误！";"301"!=e.result&&(s=e.data),t.onError(s)}))})),Object(a["a"])(n,"handleClick",(function(t,e){console.log("handleClick:",t,e),this.getSetting(t.name)})),Object(a["a"])(n,"onReboot",(function(){var t=this;this.$api.setting.reboot().then((function(){t.onSuccess("请求成功，正在重启中")}),(function(e){t.onError("操作势必啊")}))})),Object(a["a"])(n,"onSubmit",(function(){var t=this;this.$api.setting.updateSetting(this.form).then((function(){t.onSuccess("提交成功")}),(function(e){var s="参数错误！";"301"!=e.result&&(s=e.data),t.onError(s)}))})),Object(a["a"])(n,"getSetting",(function(t){var e=this;"inception"==t?this.$api.setting.getInception().then((function(t){e.form2=t})):this.$api.setting.get().then((function(t){e.setting=t,e.form=t}))})),Object(a["a"])(n,"round",(function(t){return Math.round(100*t)/100})),Object(a["a"])(n,"init",(function(){})),n),mounted:function(){var t=this;this.$nextTick((function(){t.getSetting(),t.init()}))},destroyed:function(){clearTimeout(this.inter)}},f=c,m=(s("d231"),s("2877")),u=Object(m["a"])(f,i,o,!1,null,null,null);e["default"]=u.exports},4156:function(t,e,s){},d231:function(t,e,s){"use strict";var n=s("4156"),i=s.n(n);i.a}}]);