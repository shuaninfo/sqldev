(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66cf24f7"],{"061c":function(t,o,e){},"190e":function(t,o,e){"use strict";var a=e("061c"),r=e.n(a);r.a},9815:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"body"},[t.isChrome?t._e():e("el-alert",{attrs:{title:"本产品标准运行环境为Chrome 48.0.2564 及以上版本，请使用Chrome浏览器进行访问，以便获得最佳体验。",type:"warning"}}),e("el-form",{attrs:{model:t.formData}})],1)])},r=[],n=(e("c975"),e("b0c0"),e("96cf"),e("1da1")),i=e("5530"),s=e("2f62"),c={data:function(){var t=this.$route.query;return{isChrome:!1,path:"",mode:"normal",back_url:t.url,oauth2_url:"",oauth2_logo:"",oauth2_name:"",oauth2_display_name:"",activeName:"focus",setting:{},oatuh2:{},url:"",formData:{focus_pwd:"",focus_code:"",name:"",pwd:"",captcha:"",captcha_id:"",code:""}}},computed:Object(i["a"])({},Object(s["c"])(["user"])),methods:{enterSubmit:function(){"focus"==this.activeName?this.onFocusSubmit():this.onSubmit()},getCaptcha:function(){var t=this;this.$api.get("/api/captcha").then((function(o){var e=o.id,a=o.img;t.formData.captcha=a,t.formData.captcha_id=e}))},checkBrowser:function(){var t=navigator.userAgent,o=t.indexOf("Opera")>-1;return o?"Opera":t.indexOf("Firefox")>-1?"FF":t.indexOf("Chrome")>-1?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!o?"IE":void 0},goCasLogin:function(){this.url&&(window.location.href=this.url)},onFocusSubmit:function(){var t=this;this.formData.name?this.formData.focus_pwd?this.formData.focus_code?this.$api.post("/api/focus/login",{name:this.formData.name,pwd:this.formData.focus_pwd,code:this.formData.focus_code}).then((function(o){var e=o.token,a=o.user;t.$store.commit("user",a),window.localStorage.setItem("name",t.formData.name),window.localStorage.setItem("token",e),window.localStorage.setItem("user",JSON.stringify(a)),t.$router.push("/")}),(function(t){})):this.onError("动态码不能为空！"):this.onError("密码不能为空！"):this.onError("账号不能为空！")},onSubmit:function(){var t=this;this.formData.name?this.formData.pwd?this.formData.code?this.$api.post("/api/login",this.formData).then((function(o){var e=o.token,a=o.user;t.$store.commit("user",a),window.localStorage.setItem("name",t.formData.name),window.localStorage.setItem("token",e),window.localStorage.setItem("user",JSON.stringify(a)),a.pw_score<2?(t.onError("你的密码过于简单，登录后请修改密码！"),setTimeout((function(){t.$router.push("/my/pwd"),window.localStorage.setItem("forcePwd",1)}),2e3)):t.$router.push("/")}),(function(){t.getCaptcha()})):this.onError("验证码不能为空！"):this.onError("密码不能为空！"):this.onError("账号不能为空！")},onInit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var e,a,r,n,i,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.$api.post("/api/setting",{});case 2:e=o.sent,window.localStorage.setItem("setting",t.mode),e.login_mode,e.url,a=e.oauth2_url,r=e.oauth2_logo,n=e.oauth2_name,i=e.oauth2_display_name,t.$store.commit("sysSetting",e),t.mode="focus",window.localStorage.setItem("oauth_mode",t.mode),s=window.localStorage.getItem("name"),s&&(t.formData.name=s),a&&(t.oauth2_url=a,window.localStorage.setItem("oauth2_url",a),window.location.href=t.oauth2_url),r&&(t.oauth2_logo=r),n&&(t.oauth2_name=n),t.oauth2_display_name=i;case 14:case"end":return o.stop()}}),o)})))()},handleLoginOAuth2:function(){window.location.href=this.oauth2_url}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return"Chrome"==t.checkBrowser()&&(t.isChrome=!0),o.next=3,t.onInit();case 3:t.getCaptcha();case 4:case"end":return o.stop()}}),o)})))()}},u=c,m=(e("190e"),e("2877")),h=Object(m["a"])(u,a,r,!1,null,null,null);o["default"]=h.exports}}]);