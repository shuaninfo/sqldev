(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f74bbf9a"],{"762f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mask"},[a("k-search-table",{ref:"st",attrs:{title:"脱敏模板列表",url:"/api/rule/page","search-data":e.search}},[a("template",{slot:"searchs"},[a("el-form-item",{attrs:{prop:"dataType",label:"模板类型"}},[a("k-select",{attrs:{url:"",placeholder:"请选择模板类型"},model:{value:e.search.dataType,callback:function(t){e.$set(e.search,"dataType",t)},expression:"search.dataType"}})],1)],1),a("template",{slot:"buttons"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onNew}},[e._v("新建规则")])],1),a("template",{slot:"columns"},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"rule_type",label:"规则分类"}}),a("el-table-column",{attrs:{prop:"rule_level",label:"规则等级"}}),a("el-table-column",{attrs:{prop:"info",label:"规则描述"}}),a("el-table-column",{attrs:{prop:"source",label:"来源"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("dateTime")(t.row.created_at))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.onEdit(t.row.id)}}},[e._v("编辑 ")]),a("k-btn-tip",{attrs:{tip:"确定要删除【"+t.row.name+"】规则吗?"},on:{click:function(a){return e.onDel(t.row.id)}}},[a("el-button",{attrs:{size:"mini",type:"danger"}},[e._v("删除")])],1)]}}])})],1)],2),a("dialog-edit",{ref:"ruleDialog",on:{success:e.refresh}})],1)},o=[],r=(a("ac1f"),a("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"mask-edit-dialog",attrs:{title:e.id?"编辑脱敏":"新增脱敏",visible:e.isShow,width:"840px"},on:{"update:visible":function(t){e.isShow=t}}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formDataRules,"label-width":"200px"}},[a("el-form-item",{attrs:{prop:"name",label:"规则名称"}},[a("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{prop:"rule_level",label:"敏感等级"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.rule_level,callback:function(t){e.$set(e.formData,"rule_level",t)},expression:"formData.rule_level"}},e._l(e.rule_levels,(function(e){return a("el-option",{key:e.v,attrs:{label:e.l,value:e.v}})})),1)],1),a("el-form-item",{attrs:{prop:"rule_type",label:"规则分类"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.rule_type,callback:function(t){e.$set(e.formData,"rule_type",t)},expression:"formData.rule_type"}},e._l(e.rule_types,(function(e){return a("el-option",{key:e.v,attrs:{label:e.l,value:e.v}})})),1)],1),a("el-form-item",{attrs:{prop:"match_method",label:"方法"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.match_method,callback:function(t){e.$set(e.formData,"match_method",t)},expression:"formData.match_method"}},e._l(e.match_mathods,(function(e){return a("el-option",{key:e.v,attrs:{label:e.l,value:e.v}})})),1)],1),a("el-form-item",{attrs:{prop:"math_text",label:"关键字/正则匹配内容"}},[a("el-input",{attrs:{placeholder:"关键字/正则匹配内容"},model:{value:e.formData.match_text,callback:function(t){e.$set(e.formData,"match_text",t)},expression:"formData.match_text"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.formData.match_method,expression:"formData.match_method==3"}],attrs:{label:"正则表达式规则"}},[a("el-checkbox",{model:{value:e.formData.ignore_case,callback:function(t){e.$set(e.formData,"ignore_case",t)},expression:"formData.ignore_case"}},[e._v("忽略大小写")]),a("el-checkbox",{model:{value:e.formData.multi_line,callback:function(t){e.$set(e.formData,"multi_line",t)},expression:"formData.multi_line"}},[e._v("多行匹配")])],1),a("el-form-item",{attrs:{prop:"info",label:"规则描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"",clearable:""},model:{value:e.formData.info,callback:function(t){e.$set(e.formData,"info",t)},expression:"formData.info"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onHide}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定 ")])],1)],1)}),s=[],n={data:function(){return{id:"",isShow:!1,formData:this.reset(),rule_levels:[{l:"N/A:公开",v:1},{l:"S1:内部",v:2},{l:"S2:保密",v:3},{l:"S3:机密",v:4}],rule_types:[{l:"个人敏感信息",v:1},{l:"设备敏感信息",v:2},{l:"密钥敏感信息",v:3},{l:"企业敏感信息",v:4},{l:"通用敏感信息",v:5},{l:"其他敏感信息",v:99}],match_mathods:[{l:"不包含",v:1},{l:"包含",v:2},{l:"正则匹配",v:3}],formDataRules:{name:[{required:!0,message:"请输入规则名称"}],rule_level:[{required:!0,message:"请选择等级"}],rule_type:[{required:!0,message:"请选择分类"}],match_method:[{required:!0,message:"请选择方法"}],match_text:[{required:!0,message:"请输入关键字/正则匹配内容"}]}}},props:{},watch:{},computed:{},methods:{reset:function(){return{id:"",name:"",rule_level:1,rule_type:1,rule_state:1,match_method:1,match_text:"",info:"",multi_line:!1,ignore_case:!1}},show:function(e){var t=this;this.formData=this.reset(),e?this.$api.rule.get(e).then((function(a){t.id=e,t.formData=a,t.isShow=!0})):(this.id="",this.isShow=!0)},hide:function(){this.isShow=!1},onHide:function(){this.isShow=!1},onSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$api.rule.edit(e.formData).then((function(t){e.isShow=!1,e.onSuccess("提交成功"),e.$emit("success")}))}))}},mounted:function(){},components:{}},i=n,c=(a("ee0f"),a("2877")),u=Object(c["a"])(i,r,s,!1,null,null,null),m=u.exports,f={data:function(){this.$route.params;return{search:{}}},props:{},watch:{},computed:{},methods:{onNew:function(){this.$refs.ruleDialog.show()},onEdit:function(e){this.$refs.ruleDialog.show(e)},refresh:function(){this.$refs.st.search()},onDel:function(e){var t=this;this.$api.post("/api/rule/del",{id:e}).then((function(){t.refresh()}))},onDels:function(){var e=this.$refs.st.selectValues;e&&e.length>0&&this.onDel(e)}},mounted:function(){},components:{DialogEdit:m}},p=f,h=(a("e555f"),Object(c["a"])(p,l,o,!1,null,null,null));t["default"]=h.exports},ac1d:function(e,t,a){},d5c7:function(e,t,a){},e555f:function(e,t,a){"use strict";var l=a("ac1d"),o=a.n(l);o.a},ee0f:function(e,t,a){"use strict";var l=a("d5c7"),o=a.n(l);o.a}}]);