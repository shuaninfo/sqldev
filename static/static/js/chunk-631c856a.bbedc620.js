(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-631c856a"],{"2e0b":function(t,e,a){"use strict";e["a"]={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style(){const t={};return this.gutter&&(t.marginLeft=`-${this.gutter/2}px`,t.marginRight=t.marginLeft),t}},render(t){return t(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)}}},"52e7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apps"},[a("el-row",{staticStyle:{"margin-left":"-6px","margin-right":"-6px"},attrs:{type:"flex"}},[a("div",{staticClass:"el-col el-col-6 el-col-xs-12",staticStyle:{"padding-left":"6px","padding-right":"6px"}},[a("div",{staticClass:"demo-color-box bg-danger"},[t._v(" 今日查询量 "),a("div",{staticClass:"value"},[t._v(t._s(t.stat.today_count))])])]),a("div",{staticClass:"el-col el-col-6 el-col-xs-12",staticStyle:{"padding-left":"6px","padding-right":"6px"}},[a("div",{staticClass:"demo-color-box bg-success"},[t._v(" 项目 "),a("div",{staticClass:"value"},[t._v(t._s(t.stat.project_count))])])]),a("div",{staticClass:"el-col el-col-6 el-col-xs-12",staticStyle:{"padding-left":"6px","padding-right":"6px"}},[a("div",{staticClass:"demo-color-box bg-info"},[t._v(" 数据源 "),a("div",{staticClass:"value"},[t._v(t._s(t.stat.db_count))])])]),a("div",{staticClass:"el-col el-col-6 el-col-xs-12",staticStyle:{"padding-left":"6px","padding-right":"6px"}},[a("div",{staticClass:"demo-color-box bg-warning"},[t._v(" 用户数 "),a("div",{staticClass:"value"},[t._v(t._s(t.stat.user_count))])])])]),a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"chart",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{padding:"35px"}},[t._v(" 数据源类型 ")])]),a("div",[a("ve-ring",t._b({attrs:{data:t.dbTypeStat,title:t.dbTypeTitle}},"ve-ring",t.pubSetting1,!1))],1)])],1),a("el-col",{staticClass:"chart",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(" 访问量 "),a("el-date-picker",{staticStyle:{float:"right","margin-bottom":"5px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.$constant.pickOptions},on:{change:t.queryStat},model:{value:t.query.logTimeRange,callback:function(e){t.$set(t.query,"logTimeRange",e)},expression:"query.logTimeRange"}})],1)]),a("div",[a("ve-line",t._b({attrs:{data:t.logTimeStat,toolbox:t.toolbox,title:t.logTimeTitle}},"ve-line",t.pubSetting1,!1))],1)])],1)],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(" 其他统计 "),a("el-date-picker",{staticStyle:{float:"right","margin-bottom":"5px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.$constant.pickOptions},on:{change:t.queryToday},model:{value:t.query.todayRange,callback:function(e){t.$set(t.query,"todayRange",e)},expression:"query.todayRange"}})],1)]),a("div",[a("el-row",{attrs:{gutter:0}},[a("el-col",{staticClass:"chart",attrs:{xs:24,sm:12,md:12,lg:6,xl:6}},[a("ve-bar",t._b({attrs:{data:t.dbStat,"legend-visible":!1,settings:t.dbStatSettings,title:t.dbTitle}},"ve-bar",t.pubSetting,!1))],1),a("el-col",{staticClass:"chart",attrs:{xs:24,sm:12,md:12,lg:6,xl:6}},[a("ve-pie",t._b({attrs:{data:t.logStat,"legend-visible":!1,title:t.logTitle}},"ve-pie",t.pubSetting,!1))],1),a("el-col",{staticClass:"chart",attrs:{xs:24,sm:12,md:12,lg:6,xl:6}},[a("ve-pie",t._b({attrs:{data:t.typeStat,"legend-visible":!1,title:t.typeTitle}},"ve-pie",t.pubSetting,!1))],1),a("el-col",{staticClass:"chart",attrs:{xs:24,sm:12,md:12,lg:6,xl:6}},[a("ve-bar",t._b({attrs:{data:t.userStat,"legend-visible":!1,settings:t.appStatSettings,title:t.userTitle}},"ve-bar",t.pubSetting,!1))],1)],1)],1)])],1)],1)},i=[],n=(a("b0c0"),a("b85c")),l=a("5743"),o=(a("c1df"),a("2819")),r=a("2e0b"),c={data:function(){return this.toolbox={feature:{magicType:{type:["line","bar"]}}},{query:{start:"",end:"",todayRange:[],logTimeRange:[],dbUseRange:[]},stat:{db_count:0,app_count:0,user_count:0,today_count:0,project_count:0},dbTypeStat:{columns:["类型","数量"],rows:[]},dbTypeTitle:{text:""},typeTitle:{text:"脚本类型统计",textStyle:{fontStyle:"normal",fontWeight:"normal",fontSize:16},default:10},logTimeTitle:{text:"",range:{start:"",end:""}},logStat:{columns:["类型","数量"],rows:[]},logTitle:{text:"失败率统计",textStyle:{fontStyle:"normal",fontWeight:"normal",fontSize:16}},logTimeStat:{columns:["时间","访问量"],rows:[]},dbStat:{columns:["数据源","访问量"],rows:[]},dbTitle:{text:"数据源使用量",textStyle:{fontStyle:"normal",fontWeight:"normal",fontSize:16}},dbStatSettings:{dataOrder:{label:"访问量",order:"desc"}},appTitle:{text:"当日数据导出量"},userStat:{columns:["用户名","访问量"],rows:[]},typeStat:{columns:["操作","数量"],rows:[]},userTitle:{text:"用户执行统计",textStyle:{fontStyle:"normal",fontWeight:"normal",fontSize:16}},appStatSettings:{dataOrder:{label:"访问量",order:"desc"}},pubSetting1:{height:"350px",width:"100%"},pubSetting:{height:"400px",width:"100%"},chartData1:{columns:["数据源","次数"],rows:[{"次数":1393,"数据源":"查询库"},{"次数":3530,"数据源":"用户中心"},{"次数":2923,"数据源":"订单库"},{"次数":1723,"数据源":"淘宝api"},{"次数":3792,"数据源":"日志"},{"次数":4593,"数据源":"eslog"}]},chartData:{columns:["日期","访问用户","下单用户","下单率"],rows:[{"日期":"1/1","访问用户":1393,"下单用户":1093,"下单率":.32},{"日期":"1/2","访问用户":3530,"下单用户":3230,"下单率":.26},{"日期":"1/3","访问用户":2923,"下单用户":2623,"下单率":.76},{"日期":"1/4","访问用户":1723,"下单用户":1423,"下单率":.49},{"日期":"1/5","访问用户":3792,"下单用户":3492,"下单率":.323},{"日期":"1/6","访问用户":4593,"下单用户":4293,"下单率":.78}]}}},methods:{showRange:function(t){console.log("range:",t);var e="时间";if(t&&t.length>1){var a=l["a"].utc2date(t[0]),s=l["a"].utc2date(t[1]);e=a+"-"+s}return e},onChangeLogTimeRange:function(t){console.log("v:",t)},queryStat:function(t){var e=this;if(this.query.logTimeRange&&this.query.logTimeRange.length>1){var a=l["a"].utc2date(this.query.logTimeRange[0]),s=l["a"].utc2date(this.query.logTimeRange[1]);this.$api.post("/api/sys/stat",{type:"log_time_stat",start:a,end:s}).then((function(t){var a,s=[],i=Object(n["a"])(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;s.push({"时间":l.name,"访问量":l.hits})}}catch(o){i.e(o)}finally{i.f()}e.logTimeStat.rows=s}))}},queryToday:function(){var t=this;if(this.query.todayRange&&this.query.todayRange.length>1){var e=l["a"].utc2date(this.query.todayRange[0]),a=l["a"].utc2date(this.query.todayRange[1]);this.$api.post("/api/sys/stat",{type:"log_stat",start:e,end:a}).then((function(e){var a,s=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;s.push({"类型":l.name,"数量":l.hits})}}catch(o){i.e(o)}finally{i.f()}t.logStat.rows=s})),this.$api.post("/api/sys/stat",{type:"db_stat_list",start:e,end:a}).then((function(e){var a,s=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;s.push({"数据源":l.name,"访问量":l.hits})}}catch(o){i.e(o)}finally{i.f()}t.dbStat.rows=s})),this.$api.post("/api/sys/stat",{type:"type_stat",start:e,end:a}).then((function(e){var a,s=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;console.log("item.name:"+l.name),s.push({"操作":l.name,"数量":l.hits})}}catch(o){i.e(o)}finally{i.f()}t.typeStat.rows=s})),this.$api.post("/api/sys/stat",{type:"user_stat_list",start:e,end:a}).then((function(e){var a,s=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;s.push({"用户名":l.name,"访问量":l.hits})}}catch(o){i.e(o)}finally{i.f()}t.userStat.rows=s}))}},queryBase:function(){var t=this;this.$api.post("/api/sys/stat",{type:"base_stat",start:this.query.start,end:this.query.end}).then((function(e){t.stat.db_count=e.db_count,t.stat.user_count=e.user_count,t.stat.project_count=e.project_count})),this.$api.post("/api/sys/stat",{type:"total_stat",start:this.query.start,end:this.query.end}).then((function(e){t.stat.today_count=e.hits})),this.$api.post("/api/sys/stat",{type:"db_type_stat",start:this.query.start,end:this.query.end}).then((function(e){var a,s=[],i=Object(n["a"])(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;s.push({"类型":l.name,"数量":l.hits})}}catch(o){i.e(o)}finally{i.f()}console.log("rows:xxxx ",s),t.dbTypeStat.rows=s}))},init:function(){this.queryBase(),this.queryStat(),this.queryToday()}},components:{ElRow:r["a"],VeLine:o["VeLine"],VeRadar:o["VeRadar"],VeHistogram:o["VeHistogram"],VeScatter:o["VeScatter"],VeMap:o["VeMap"],VeBar:o["VeBar"],VePie:o["VePie"],VeRing:o["VeRing"],VeWaterfall:o["VeWaterfall"],VeFunnel:o["VeFunnel"]},mounted:function(){var t=this,e=l["a"].timeRange("now/d to now/d");this.query.todayRange=e,e&&e.length>1&&(this.query.start=l["a"].utc2date(e[0]),this.query.end=l["a"].utc2date(e[1])),this.query.logTimeRange=l["a"].timeRange("now-7d to now"),this.$nextTick((function(){t.init()}))}},d=c,u=(a("d616"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,"9a1b1d58",null);e["default"]=p.exports},c998:function(t,e,a){},d616:function(t,e,a){"use strict";var s=a("c998"),i=a.n(s);i.a}}]);