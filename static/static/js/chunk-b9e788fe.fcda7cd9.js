(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9e788fe"],{"03b9":function(e,t,i){"use strict";var o=i("ac25"),l=i.n(o);l.a},2231:function(e,t,i){},"2b16":function(e,t,i){"use strict";var o=i("c3df"),l=i.n(o);l.a},ac25:function(e,t,i){},afb7:function(e,t,i){"use strict";var o=i("2231"),l=i.n(o);l.a},c3df:function(e,t,i){},f381:function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{attrs:{gutter:8}},[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"sys-setting"},[i("el-tabs",{attrs:{type:"border-card"}},[0!=e.project?i("el-tab-pane",{attrs:{label:"基本信息"}},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"text item"},[i("el-form",{ref:"ruleForm",attrs:{"label-width":"300px"}},[i("el-form-item",{attrs:{label:"项目"}},[e._v(" "+e._s(e.project_name)+" ")]),i("el-form-item",{attrs:{label:"级别"}},[e._v(" "+e._s(e.edit?"项目":"全局")+" ")]),i("el-form-item",{attrs:{label:"权限"}},[e._v(" "+e._s(e.edit?"读写":"只读")+" ")]),i("el-form-item",{attrs:{label:"开启项目专有审计"}},[i("el-tooltip",{attrs:{placement:"top",content:"开启会拷贝一份全局配置到项目，项目级别审计仅对本项目使用数据源有效"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.setting_form.project_setting,callback:function(t){e.$set(e.setting_form,"project_setting",t)},expression:"setting_form.project_setting"}})],1)],1)],1)],1)]),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"text item"},[i("el-form",{ref:"ruleForm2",attrs:{"label-width":"20px"}},[i("el-form-item",{staticClass:"el-col-24"},[i("k-btn-tip",{attrs:{tip:"确定要"+(e.setting_form.project_setting?"开启":"关闭")+"项目审计配置吗?"},on:{click:e.onChangeProjectSettingMode}},[i("el-button",{staticStyle:{width:"100%"},attrs:{size:"medium",type:"primary"}},[e._v("保存")])],1)],1)],1)],1)])],1):e._e(),i("el-tab-pane",{attrs:{label:"规则设置"}},[i("inception",{attrs:{configForm:e.configForm,otherForm:e.otherConfig,edit:e.edit},on:{submit:e.submit}})],1),i("el-tab-pane",{attrs:{label:"备份设置"}},[i("el-card",{staticClass:"box-card"},[i("el-alert",{attrs:{title:"修改备份数据库地址可能导致之前的备份不能恢复。",type:"warning"}}),i("el-form",{ref:"configForm",attrs:{model:e.form,"label-width":"280px",size:"mini",disabled:!e.edit}},[i("el-form-item",{staticClass:"rule-item-label",attrs:{label:"备份数据库地址"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.form.backup_host,callback:function(t){e.$set(e.form,"backup_host",t)},expression:"form.backup_host"}})],1),i("el-form-item",{attrs:{label:"端口",prop:"port"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.form.backup_port,callback:function(t){e.$set(e.form,"backup_port",t)},expression:"form.backup_port"}})],1),i("el-form-item",{attrs:{label:"用户名",prop:"user"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.form.backup_user,callback:function(t){e.$set(e.form,"backup_user",t)},expression:"form.backup_user"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.form.backup_password,callback:function(t){e.$set(e.form,"backup_password",t)},expression:"form.backup_password"}})],1)],1)],1),i("el-card",{staticClass:"box-card"},[i("el-form",[i("el-form-item",{staticClass:"el-col-24"},[e.edit?i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"medium"},on:{click:e.onSubmitBackup}},[e._v("保存 ")]):e._e()],1)],1)],1)],1)],1)],1)])],1)},l=[],a=(i("a9e3"),i("2ef0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("ORACLE")])]),i("div",{staticClass:"text item"},[e.configForm?i("el-form",{staticClass:"el-row",attrs:{model:e.otherForm,"label-width":"280px",size:"mini",disabled:!e.edit}},[i("div",[e._v("支持中ing")])]):e._e()],1)]),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("MYSQL")])]),i("div",{staticClass:"text item"},[e.configForm?i("el-form",{ref:"configForm",staticClass:"el-row",attrs:{model:e.configForm,"label-width":"280px",size:"mini",disabled:!e.edit}},[i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许删除数据库"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_drop_database,callback:function(t){e.$set(e.configForm,"enable_drop_database",t)},expression:"configForm.enable_drop_database"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许删除表"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_drop_table,callback:function(t){e.$set(e.configForm,"enable_drop_table",t)},expression:"configForm.enable_drop_table"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许指定表和库设置字符集"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_set_charset,callback:function(t){e.$set(e.configForm,"enable_set_charset",t)},expression:"configForm.enable_set_charset"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许指定表和库设置排序"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_set_collation,callback:function(t){e.$set(e.configForm,"enable_set_collation",t)},expression:"configForm.enable_set_collation"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许指定存储引擎"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_set_engine,callback:function(t){e.$set(e.configForm,"enable_set_engine",t)},expression:"configForm.enable_set_engine"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查列设置字符集"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_column_charset,callback:function(t){e.$set(e.configForm,"enable_column_charset",t)},expression:"configForm.enable_column_charset"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查表注释"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_table_comment,callback:function(t){e.$set(e.configForm,"check_table_comment",t)},expression:"configForm.check_table_comment"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查列注释"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_column_comment,callback:function(t){e.$set(e.configForm,"check_column_comment",t)},expression:"configForm.check_column_comment"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查关键字"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_identifer_keyword,callback:function(t){e.$set(e.configForm,"enable_identifer_keyword",t)},expression:"configForm.enable_identifer_keyword"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"禁止建表无主键"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_primary_key,callback:function(t){e.$set(e.configForm,"check_primary_key",t)},expression:"configForm.check_primary_key"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"主键必须是INT"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_pk_columns_only_int,callback:function(t){e.$set(e.configForm,"enable_pk_columns_only_int",t)},expression:"configForm.enable_pk_columns_only_int"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"自增列必须是int/bigint"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_autoincrement_datatype,callback:function(t){e.$set(e.configForm,"check_autoincrement_datatype",t)},expression:"configForm.check_autoincrement_datatype\t"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"建表自增列的值是否为1"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_autoincrement_init_value,callback:function(t){e.$set(e.configForm,"check_autoincrement_init_value",t)},expression:"configForm.check_autoincrement_init_value"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"建表自增列名必须是ID"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_autoincrement_name,callback:function(t){e.$set(e.configForm,"check_autoincrement_name",t)},expression:"configForm.check_autoincrement_name"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"自增列必须是无符号型"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_autoincrement_unsigned,callback:function(t){e.$set(e.configForm,"enable_autoincrement_unsigned",t)},expression:"configForm.enable_autoincrement_unsigned"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查新建或修改的列是否有默认值"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_column_default_value,callback:function(t){e.$set(e.configForm,"check_column_default_value",t)},expression:"configForm.check_column_default_value"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查列顺序的变更"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_column_position_change,callback:function(t){e.$set(e.configForm,"check_column_position_change",t)},expression:"configForm.check_column_position_change"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查列字段类型的变更"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_column_type_change,callback:function(t){e.$set(e.configForm,"check_column_type_change",t)},expression:"configForm.check_column_type_change"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查current_timestamp数量"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_timestamp_count,callback:function(t){e.$set(e.configForm,"check_timestamp_count",t)},expression:"configForm.check_timestamp_count"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查timestamp类型默认值"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_timestamp_default,callback:function(t){e.$set(e.configForm,"check_timestamp_default",t)},expression:"configForm.check_timestamp_default"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"标识符必须是大写"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_identifier_upper,callback:function(t){e.$set(e.configForm,"check_identifier_upper",t)},expression:"configForm.check_identifier_upper"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持外键"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_foreign_key,callback:function(t){e.$set(e.configForm,"enable_foreign_key",t)},expression:"configForm.enable_foreign_key"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持json类型字段"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_json_type,callback:function(t){e.$set(e.configForm,"enable_json_type",t)},expression:"configForm.enable_json_type"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"DML语句禁用LIMIT"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_dml_limit,callback:function(t){e.$set(e.configForm,"check_dml_limit",t)},expression:"configForm.check_dml_limit\t"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"DML语句禁用OrderBy"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_dml_orderby,callback:function(t){e.$set(e.configForm,"check_dml_orderby",t)},expression:"configForm.check_dml_orderby"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查DML语句where条件"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_dml_where,callback:function(t){e.$set(e.configForm,"check_dml_where",t)},expression:"configForm.check_dml_where"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持change column语法"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_change_column,callback:function(t){e.$set(e.configForm,"enable_change_column",t)},expression:"configForm.enable_change_column"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"where条件禁止隐式类型转换"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_implicit_type_conversion,callback:function(t){e.$set(e.configForm,"check_implicit_type_conversion",t)},expression:"configForm.check_implicit_type_conversion"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查插入语句存在列名"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_insert_field,callback:function(t){e.$set(e.configForm,"check_insert_field",t)},expression:"configForm.check_insert_field"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查插入语句中的列链表的存在性"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.check_insert_field,callback:function(t){e.$set(e.configForm,"check_insert_field",t)},expression:"configForm.check_insert_field"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许blob/text/json类型置为not nul"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_blob_not_null,callback:function(t){e.$set(e.configForm,"enable_blob_not_null",t)},expression:"configForm.enable_blob_not_null"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"检查是不是支持BLOB字段"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_blob_type,callback:function(t){e.$set(e.configForm,"enable_blob_type",t)},expression:"configForm.enable_blob_type"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持enum,set,bit数据类型"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_enum_set_bit,callback:function(t){e.$set(e.configForm,"enable_enum_set_bit",t)},expression:"configForm.enable_enum_set_bit"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"启用最小化回滚"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_minimal_rollback,callback:function(t){e.$set(e.configForm,"enable_minimal_rollback",t)},expression:"configForm.enable_minimal_rollback"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许列为NULL"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_nullable,callback:function(t){e.$set(e.configForm,"enable_nullable",t)},expression:"configForm.enable_nullable"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许空索引名"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_null_index_name,callback:function(t){e.$set(e.configForm,"enable_null_index_name",t)},expression:"configForm.enable_null_index_name"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"禁止order by rand"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_orderby_rand,callback:function(t){e.$set(e.configForm,"enable_orderby_rand",t)},expression:"configForm.enable_orderby_rand"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持分区表"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_partition_table,callback:function(t){e.$set(e.configForm,"enable_partition_table",t)},expression:"configForm.enable_partition_table"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许select *"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_select_star,callback:function(t){e.$set(e.configForm,"enable_select_star",t)},expression:"configForm.enable_select_star"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"支持时间为0值"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_zero_date,callback:function(t){e.$set(e.configForm,"enable_zero_date",t)},expression:"configForm.enable_zero_date"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"允许timestamp类型字段"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_timestamp_type,callback:function(t){e.$set(e.configForm,"enable_timestamp_type",t)},expression:"configForm.enable_timestamp_type"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"指定列必须加索引"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.configForm.columns_must_have_index,callback:function(t){e.$set(e.configForm,"columns_must_have_index",t)},expression:"configForm.columns_must_have_index"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"最大数据包大小.默认4194304"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_allowed_packet,callback:function(t){e.$set(e.configForm,"max_allowed_packet",t)},expression:"configForm.max_allowed_packet"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"最大char长度"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_char_length,callback:function(t){e.$set(e.configForm,"max_char_length",t)},expression:"configForm.max_char_length"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"DDL最大影响行数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_ddl_affect_rows,callback:function(t){e.$set(e.configForm,"max_ddl_affect_rows",t)},expression:"configForm.max_ddl_affect_rows"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"insert最大行数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_insert_rows,callback:function(t){e.$set(e.configForm,"max_insert_rows",t)},expression:"configForm.max_insert_rows"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"update/delete最大行数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_update_rows,callback:function(t){e.$set(e.configForm,"max_update_rows",t)},expression:"configForm.max_update_rows"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"单个索引可指定的列数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_key_parts,callback:function(t){e.$set(e.configForm,"max_key_parts",t)},expression:"configForm.max_key_parts"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"单表最大索引数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_keys,callback:function(t){e.$set(e.configForm,"max_keys",t)},expression:"configForm.max_keys"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"主键最多列数"}},[i("el-input-number",{attrs:{size:"mini"},model:{value:e.configForm.max_primary_key_parts,callback:function(t){e.$set(e.configForm,"max_primary_key_parts",t)},expression:"configForm.max_primary_key_parts"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"合并同个表的alert语句"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.merge_alter_table,callback:function(t){e.$set(e.configForm,"merge_alter_table",t)},expression:"configForm.merge_alter_table"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"建表必须加的列"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.configForm.must_have_columns,callback:function(t){e.$set(e.configForm,"must_have_columns",t)},expression:"configForm.must_have_columns"}})],1),i("el-form-item",{staticClass:"el-col-6",attrs:{label:"表名前缀"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.configForm.table_prefix,callback:function(t){e.$set(e.configForm,"table_prefix",t)},expression:"configForm.table_prefix"}})],1),i("el-form-item",{staticClass:"el-col-12",attrs:{label:"支持的引擎"}},[i("el-tooltip",{staticClass:"item",attrs:{content:"支持的存储引擎,多个引擎用逗号分割",placement:"top-start"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.configForm.support_engine,callback:function(t){e.$set(e.configForm,"support_engine",t)},expression:"configForm.support_engine"}})],1)],1)],1):e._e()],1)]),i("el-card",{staticClass:"box-card"},[i("el-form",[e.edit?i("el-form-item",{staticClass:"el-col-24"},[i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")])],1):e._e()],1)],1)],1)}),n=[],s={data:function(){return{real_id:0,filterText:""}},computed:{},props:{configForm:{},otherForm:{},edit:{type:Boolean,default:function(){return!1}}},watch:{},methods:{onSubmit:function(){this.$emit("submit",this.configForm,this.otherForm)}},components:{},mounted:function(){}},c=s,r=(i("03b9"),i("0c7c")),m=Object(r["a"])(c,a,n,!1,null,null,null),f=m.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card"},[i("el-form",{attrs:{model:e.configForm,"label-width":"280px",size:"mini",disabled:!e.edit}},[i("el-form-item",{attrs:{label:"开启工单自动审批"}},[i("el-tooltip",{attrs:{placement:"top",content:"开启后，符合条件的工单自动审核并执行。"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.work_auto_review,callback:function(t){e.$set(e.configForm,"work_auto_review",t)},expression:"configForm.work_auto_review"}})],1)],1),e.configForm.work_auto_review?i("el-form-item",{attrs:{label:"自动审批最大行数",prop:"user"}},[i("el-tooltip",{attrs:{placement:"top",content:"超过最大行数走人工审批"}},[i("el-input",{attrs:{type:"number",size:"mini"},model:{value:e.configForm.max_update_rows,callback:function(t){e.$set(e.configForm,"max_update_rows",e._n(t))},expression:"configForm.max_update_rows"}})],1)],1):e._e(),e.configForm.work_auto_review?i("el-form-item",{attrs:{label:"自动审批仅支持DML",prop:"user"}},[i("el-tooltip",{attrs:{placement:"top",content:"开启后自动审核仅支持DML工单"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.auto_review_only_dml,callback:function(t){e.$set(e.configForm,"auto_review_only_dml",t)},expression:"configForm.auto_review_only_dml"}})],1)],1):e._e(),e.configForm.work_auto_review?i("el-form-item",{attrs:{label:"不自动审批的表达式",prop:"user"}},[i("el-tooltip",{attrs:{placement:"top",content:"正则表达式，匹配的脚本走人工审批"}},[i("el-input",{attrs:{size:"mini"},model:{value:e.configForm.auto_review_regex,callback:function(t){e.$set(e.configForm,"auto_review_regex",t)},expression:"configForm.auto_review_regex"}})],1)],1):e._e(),i("el-form-item",{attrs:{label:"强制备份"}},[i("el-tooltip",{attrs:{placement:"top",content:"开启后，支持备份的数据源会强制备份。"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.enable_backup_switch,callback:function(t){e.$set(e.configForm,"enable_backup_switch",t)},expression:"configForm.enable_backup_switch"}})],1)],1),i("el-form-item",{attrs:{label:"开启工单线下手工执行"}},[i("el-tooltip",{attrs:{placement:"top",content:"开启后，工单执行支持线下执行,支持DBA线下手动执行语句并且确认执行结束。"}},[i("el-switch",{attrs:{size:"mini"},model:{value:e.configForm.work_manual,callback:function(t){e.$set(e.configForm,"work_manual",t)},expression:"configForm.work_manual"}})],1)],1),i("el-form-item",{attrs:{label:"驳回等级",prop:"port"}},[i("el-radio",{attrs:{label:1},model:{value:e.configForm.auto_review_wrong,callback:function(t){e.$set(e.configForm,"auto_review_wrong",t)},expression:"configForm.auto_review_wrong"}},[e._v("警告驳回")]),i("el-radio",{attrs:{label:2},model:{value:e.configForm.auto_review_wrong,callback:function(t){e.$set(e.configForm,"auto_review_wrong",t)},expression:"configForm.auto_review_wrong"}},[e._v("错误驳回")])],1)],1)],1),i("el-card",{staticClass:"box-card"},[i("el-form",[i("el-form-item",{staticClass:"el-col-24"},[e.edit?i("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"medium"},on:{click:e.onSubmit}},[e._v("保存")]):e._e()],1)],1)],1)],1)},u=[],b={data:function(){return{real_id:0,filterText:""}},computed:{},props:{configForm:{},edit:{type:Boolean,default:function(){return!1}}},watch:{},methods:{onSubmit:function(){!this.configForm.work_auto_review||this.configForm.max_update_rows?this.$emit("submit",this.configForm):this.onError("请输入自动审批最大行数")}},components:{},mounted:function(){}},p=b,g=(i("2b16"),Object(r["a"])(p,_,u,!1,null,null,null)),d=g.exports,h={data:function(){return{setting_form:{project_setting:this.project==this.real_id},form:{},edit:!1,real_id:0,configForm:{},otherConfig:{},filterText:""}},computed:{},props:{project:{type:Number,default:function(){return 0}},project_name:{type:String,default:function(){return""}},db_id:{type:String,default:function(){return"*"}}},watch:{project:"init"},methods:{onChangeProjectSettingMode:function(){var e=this;this.setting_form.project_setting?this.$api.setting.addInception(this.project,this.db_id).then((function(t){e.onSuccess("开启项目配置成功"),e.getConfig(e.project)})):this.$api.setting.delInception(this.project,this.db_id).then((function(t){e.onSuccess("关闭项目配置成功"),e.getConfig(e.project)}))},submit:function(e,t){var i=this,o={};o.config=JSON.stringify(e),o.other_config=JSON.stringify(t),o.db_id=this.form.db_id,o.project=this.real_id,o.db_id=this.form.db_id,o.project=this.real_id,this.$api.setting.updateInceptionSetting(o).then((function(){i.onSuccess("审计规则更新成功"),i.$emit("refresh")}))},onSubmitBackup:function(){var e=this,t=this.form;t.project=this.real_id,this.$api.setting.updateInceptionBackupSetting(t).then((function(){e.onSuccess("备份数据库信息更新成功"),e.$emit("refresh")}))},reset:function(){this.configForm={}},initFrom:function(e){e.warning_conf?this.waringForm=e.warning_conf:this.reset()},init:function(){var e=this;this.setting_form={project_setting:this.project==this.real_id},this.form={},this.edit=!1,this.real_id=0,this.configForm={},this.otherConfig={},this.$nextTick((function(){e.getConfig(e.project)}))},getConfig:function(e){var t=this;this.$api.setting.getInception(e).then((function(e){console.log("data:",JSON.stringify(e)),t.configForm=JSON.parse(e.config),t.form=e,t.real_id=e.project;try{t.otherConfig=JSON.parse(e.other_config)}catch(i){console.log(i),t.otherConfig={}}t.real_id==t.project?(t.edit=!0,t.setting_form.project_setting=!0):(t.edit=!1,t.setting_form.project_setting=!1)}))}},components:{Inception:f,WorkConfig:d},mounted:function(){this.init()}},F=h,k=(i("afb7"),Object(r["a"])(F,o,l,!1,null,null,null));t["a"]=k.exports}}]);