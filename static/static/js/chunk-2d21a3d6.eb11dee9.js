(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a3d6"],{bb55:function(e,o,t){"use strict";t.r(o);var n=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]})},a=[],r=(t("4d63"),t("ac1f"),t("25f0"),t("5319"),t("5530")),i=(t("365c"),t("2f62")),l={data:function(){this.$route.params;return{loading:!0}},computed:Object(r["a"])({},Object(i["c"])(["user"])),methods:{getUrlKey:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(window.location.href)||[,""])[1].replace(/\+/g,"%20"))||null}},mounted:function(){var e=this,o=this.getUrlKey("code");o?this.$api.post("/api/login/oauth2",{code:o}).then((function(o){e.$store.commit("user",o),window.localStorage.setItem("token",o.token),window.localStorage.setItem("user",JSON.stringify(o)),e.onSuccess("登录成功");var t=window.localStorage.getItem("beforeUrl");console.log("beforeUrl",t),e.$router.push("/"),e.loading=!1})).catch((function(o){console.log("oauth2 login:",o);var t=window.localStorage.getItem("oauth_mode");if("focus"==t){var n=window.localStorage.getItem("oauth2_url");window.location.href=n+"&error="+encodeURIComponent(o.data)}else e.$message({showClose:!0,duration:2e3,type:"warning",message:o.data}),setTimeout((function(){e.loading=!1,e.$router.replace("/login")}),5e3)})):this.$router.replace("/login")}},c=l,s=t("2877"),u=Object(s["a"])(c,n,a,!1,null,null,null);o["default"]=u.exports}}]);